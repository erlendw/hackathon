<canvas id="line-chart" width="500" height="300"></canvas>

<script>

    $(document).ready(function(){

        $.ajax({
            type: "GET",
            url: "http://cloudsocial.azurewebsites.net/api/followers/facebook",
            dataType: "jsonp",
            success: function(data){

                drawLineChart(data,50, data+50);

            },

            error: function (xhr, ajaxOptions, thrownError) {

                drawLineChart(50,50, 100);
            }
        })


    });

    function drawLineChart(tall1, tall2, total){
        $(document).ready(function(){
            var ctx = $('#line-chart').get(0).getContext("2d");

            var lineData = {
                labels: ["January", "February", "March", "April", "May", "June", "July"],
                datasets: [
                    {
                        label: "Total",
                        fillColor: "rgba(251,151,151,0.2)",
                        strokeColor: "rgba(251,151,151,1)",
                        pointColor: "rgba(251,151,151,1)",
                        pointStrokeColor: "#fff",
                        pointHighlightFill: "#fff",
                        pointHighlightStroke: "rgba(251,151,151,1)",
                        data: [total, total+10, total+20, total+30, total+40, total+50, total+100]
                    },
                    {
                        label: "Twitter",
                        fillColor: "rgba(151,187,205,0.2)",
                        strokeColor: "rgba(151,205,151,1)",
                        pointColor: "rgba(151,205,151,1)",
                        pointStrokeColor: "#fff",
                        pointHighlightFill: "#fff",
                        pointHighlightStroke: "rgba(151,205,151,1)",
                        data: [tall2+15, tall2+25, tall2+35, tall2+45, tall2+55, tall2+65, tall2+120]
                    },
                    {
                        label: "Facebook",
                        fillColor: "rgba(151,187,205,0.2)",
                        strokeColor: "rgba(151,187,205,1)",
                        pointColor: "rgba(151,187,205,1)",
                        pointStrokeColor: "#fff",
                        pointHighlightFill: "#fff",
                        pointHighlightStroke: "rgba(151,187,205,1)",
                        data: [tall1, tall1+10, tall1+20, tall1+30, tall1+40, tall1+50, tall1+100]
                    }
                ]
            };

            var lineChart = new Chart(ctx).Line(lineData, {

                ///Boolean - Whether grid lines are shown across the chart
                scaleShowGridLines : true,

                //String - Colour of the grid lines
                scaleGridLineColor : "rgba(0,0,0,.05)",

                //Number - Width of the grid lines
                scaleGridLineWidth : 1,

                //Boolean - Whether to show horizontal lines (except X axis)
                scaleShowHorizontalLines: true,

                //Boolean - Whether to show vertical lines (except Y axis)
                scaleShowVerticalLines: true,

                //Boolean - Whether the line is curved between points
                bezierCurve : true,

                //Number - Tension of the bezier curve between points
                bezierCurveTension : 0.4,

                //Boolean - Whether to show a dot for each point
                pointDot : true,

                //Number - Radius of each point dot in pixels
                pointDotRadius : 4,

                //Number - Pixel width of point dot stroke
                pointDotStrokeWidth : 1,

                //Number - amount extra to add to the radius to cater for hit detection outside the drawn point
                pointHitDetectionRadius : 20,

                //Boolean - Whether to show a stroke for datasets
                datasetStroke : true,

                // Number - Pixel width of dataset stroke
                datasetStrokeWidth : 2,

                //Boolean - Whether to fill the dataset with a colour
                datasetFill : true,

                //String - A legend template
                legendTemplate : "<ul class=\"<%=name.toLowerCase()%>-legend\"><% for (var i=0; i<datasets.length; i++){%><li><span style=\"background-color:<%=datasets[i].strokeColor%>\"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>"

            });

            var legend = lineChart.generateLegend();
            $('#linechart-legend').append(legend);
        });
    }
</script>